from django.db import models
from accounts.models import UserAccount
import datetime
from datetime import date, timedelta
from time import gmtime, strftime


# Create your models here.

import os
def content_file_name(instance, filename):
    showtime = strftime("%d-%m-%Y", gmtime())
    ext = filename.split('.')[-1]
    filename = "%s_%s.%s" % (instance.uploaded_by.id, showtime, ext)
    return os.path.join('uploaded_files', filename)

class FileUpload(models.Model):
    uploaded_by = models.ForeignKey(UserAccount, on_delete=models.CASCADE, default='1')
    docfile = models.FileField(blank=False, null=False, upload_to=content_file_name)
    remarque = models.CharField(max_length=20)
    timestamp = models.DateTimeField(auto_now_add=True)

# class UploadedFile(models.Model):
#     ip_port_vuln = models.CharField(max_length=100)
#     date_de_scan = models.CharField(max_length=100)
#     ip_prive = models.CharField(max_length=100)
#     field_5 = models.CharField(max_length=100)
#     groupe = models.CharField(max_length=100)
#     owner = models.CharField(max_length=100)
#     status = models.CharField(max_length=100)
#     feedback = models.CharField(max_length=100)
#     si = models.CharField(max_length=100)
#     asset_names = models.CharField(max_length=100)
#     asset_os_name = models.CharField(max_length=100)
#     asset_os_version = models.CharField(max_length=100)
#     service_port = models.CharField(max_length=100)
#     service_name = models.CharField(max_length=100)
#     service_product = models.CharField(max_length=100)
#     vulnerability_severity_level = models.CharField(max_length=100)
#     severity = models.CharField(max_length=100)
#     vulnerability_iD = models.CharField(max_length=100)
#     vulnerability_title = models.CharField(max_length=100)
#     vulnerability_description = models.CharField(max_length=100)
#     vulnerability_solution = models.CharField(max_length=100)
#     vulnerability_proof = models.CharField(max_length=100)
#     vulnerability_additional_urls = models.CharField(max_length=100)
#     vulnerability_cve_ids = models.CharField(max_length=100)
#     vulnerability_cve_urls = models.CharField(max_length=100)
#     vulnerability_published_date = models.CharField(max_length=100)
#     vulnerability_test_result_code = models.CharField(max_length=100)
#     exploit_count = models.CharField(max_length=100)
#     exploit_minimum_skill = models.CharField(max_length=100)
#     exploit_urls = models.CharField(max_length=100)
#     action_a_performer  = models.CharField(max_length=100)
#     status_actuel  = models.CharField(max_length=100)
#     date_previsionelle_de_loperation  = models.CharField(max_length=100)
#     date_execution_operation  = models.CharField(max_length=100)
#     comentaire_resolution  = models.CharField(max_length=100)
#     vulnerability_age = models.CharField(max_length=100)
